<?phpnamespace Verba\Mod\FeedBack\Block;use Verba\Mod\FeedBack;use Verba\Mod\Telegram;use Verba\Mod\Viber;use function Verba\_mod;class AddEntry extends \Verba\Mod\Routine\Block\CUNow{    public $valid_otype = 'feedback';    public $responseAs = 'json-item-keys';    public $responseAsKeys = array(        'id'    );    public $templates = array(        'telegram_admin_notify' => '/telegram/admin_notify.tpl',        'viber_admin_notify' => '/viber/admin_notify.tpl'    );    function init()    {        $this->rq->setOt('feedback');    }    function routedActions()    {        return [            'create' => true,        ];    }    function build()    {        parent::build();        if (!$this->ae->getIID() || $this->ae->haveErrors()) {            throw  new \Verba\Exception\Building($this->ae->log()->getMessagesAsStr('error'));        }        /**         * @var FeedBack $mFeedback         * @var Telegram $mTelegram         * @var Viber $mViber         */        $contactFormData = $this->ae->getObjectData();        $mFeedback = _mod('feedback');        $mFeedback->sendCreationNonifyEmail($contactFormData);        $mFeedback->thanksMessageNotifyToAuthor($contactFormData['email']);        $tpl = $this->tpl();        $tpl->define($this->templates);        $tpl->assign(array(            'NAME' => $contactFormData['name'],            'EMAIL' => $contactFormData['email']        ));        $mTelegram = _mod('telegram');        $mViber = _mod('viber');        $mTelegram->notifyAdmins($tpl->parse(false,'telegram_admin_notify'));        $mViber->notifyAdmins($tpl->parse(false,'viber_admin_notify'));        return $this->content;    }}